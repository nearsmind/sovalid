"use strict";!function(e){function a(e){function l(){console.log(":::RULES:::"),console.log(t),console.log(":::FUNCTIONS:::"),console.log(n),console.log(":::VALIDATION PARTS:::"),console.log(r)}function s(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function u(){return null!=someValue&&"[object Object]"===Object.prototype.toString.call(someValue)}function d(e){return"string"==typeof e}function f(e){return"function"==typeof e}function c(e,a,t){if(a&&d(a)&&!(!a.trim().length>0)){var n=a.split("."),r=e;if(n&&n.length>1)for(var i in n)r=r[n[i]];else r=e[n[0]];return!r&&t?t:r}}function m(e,a){return e&&a&&(t[e]=a),o}function p(e){return delete t[e],o}function v(e,a){return e&&a&&(n[e]=a),o}function b(e,a){return e&&a&&(r[e]={props:a}),o}function y(e){return r[e]?!0:!1}function g(e){return a=e,o}function h(e){function i(){a={required:!1,global:!1,validationRules:{},activeDepends:[],passiveDepends:[]}}function l(){return i(),n}function d(e,t,r){return a.validationRules[e]=s(t)&&u(t)?{fn:e,params:t,steps:r}:{fn:e,params:{value:t},steps:r},n}function f(e){return delete a.validationRules[e],n}function c(e){return a.global=e,n}function m(e,t){return a.required=e,a.requiredSteps=t,n}function p(e,t,r){return a.activeDepends.push({prop:e,value:t,operand:r}),n}function v(e,t,r,i){return a.passiveDepends.push({prop:e,value:t,mustBeValid:r,operand:i}),n}function b(n){return n&&r[n]&&r[n].props.push(e),t[e]=a,o}var a,n={required:m,r:m,make:b,addValidation:d,av:d,deleteValidation:f,dv:f,addActiveDepends:p,aad:p,addPassiveDepends:v,apd:v,global:c,g:c,reset:l};return function(){t[e]?a=t[e]:i()}(),n}function _(e,t,r){function p(){var a=typeof t;return"boolean"!==a||null!==t&&void 0!==t?"number"!==a&&"boolean"!==a&&(!t||d(t)&&""===t.trim())?!1:!0:!1}function v(e){var t=c(a,e.prop);if("number"==typeof e.value&&(""===t||void 0===t||null===t))return!1;switch("boolean"==typeof e.value&&(t=getBool(t)),e.operand){case i.greaterThan:return t>e.value;case i.greaterThanOrEqual:return t>=e.value;case i.lowerThan:return t<e.value;case i.lowerThanOrEqual:return t<=e.value;case i.equal:return t==e.value;case i.strictlyEqual:return t===e.value;case i.different:return t!=e.value;case i.strictlyDifferent:default:return t!==e.value}}function b(){if(e.global||void 0!==t&&null!==t)for(var a in e.validationRules)if(y(r,e.validationRules[a].steps)){var i=n[e.validationRules[a].fn];if(o=f(e.validationRules[a].params.value)?i.call(this,t,e.validationRules[a].params.value.call(this)):i.call(this,t,e.validationRules[a].params),s(o)){if(!o.result)return l=o.error?o.error:a,u=e.validationRules[a].params,void(o=o.result);o=!0}else if(!o)return l=a,void(u=e.validationRules[a].params)}}function y(e,a){if(!e||0===e.length)return!0;if(a&&a.length>0)for(var t in e)if(-1!==a.indexOf(e[t]))return!0;return!1}var l,u,o=!0,m=!1;return function(){for(var n=p(t),i=0;i<e.passiveDepends.length;i++){var s=s(e.passiveDepends[i].value);if(s&&e.passiveDepends[i].value.call(this,c(a,e.passiveDepends[i].prop))||!s&&v(e.passiveDepends[i]))m=!0;else if(e.passiveDepends[i].mustBeValid)return void(o=!0)}if(m&&!n)return l="required",void(o=!1);for(var i=0;i<e.activeDepends.length;i++){var s=s(e.activeDepends[i].value);if(s&&!e.activeDepends[i].value.call(this,c(a,e.activeDepends[i].prop))||!s&&!v(e.activeDepends[i]))return void(o=!0)}e.global?b():e.required?y(r,e.requiredSteps)&&!n?(l="required",o=!1):b():n?b():o=!0}(),{validationResult:o,error:l,params:u}}function D(e,t,n,r){if(t){var o=c(a,n),l=_(t,o,r);l.validationResult===!1&&e.push({prop:n,value:o,error:l.error})}}function T(e,a,n,r){if(n)for(var i=0;i<n.length;i++)D(e,t[n[i]],n[i],a,r);else for(var o in t)D(e,t[o],o,a)}function I(e){var a=[];return T(a,e),a}function $(e,a){var t=[];return e&&T(t,a,e,a),t}function x(e,a){var t=[];if(e)for(var n=0;n<e.length;n++)T(t,a,r[e[n]].props,e[n]);return t}var n,a=e,t={},r={},i={greaterThan:1,gt:1,greaterThanOrEqual:2,gte:2,lowerThan:3,lt:3,lowerThanOrEqual:4,lte:4,equal:5,eq:5,strictlyEqual:6,seq:6,different:7,dif:7,strictlyDifferent:8,sdif:8},o={rulemaker:h,validate:I,validateProps:$,validateParts:x,addRule:m,ar:m,deleteRule:p,dr:p,addValidationRule:v,avr:v,addValidationPart:b,avp:b,operand:i,op:i,replaceObject:g,validationPartExist:y,debug:l};return function(){n={},n.min=function(e,a){return e>=a.value?!0:!1},n.max=function(e,a){return e<=a.value?!0:!1},n.minLength=function(e,a){return e.length>=a.value?!0:!1},n.maxLength=function(e,a){return e.length<=a.value?!0:!1}}(),o}e.sovalid=a}(window);
