"use strict";!function(e){var r=function(){function e(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function t(e){if(void 0===e)return!1;var r=+e;return isNaN(r)?!!String(e).toLowerCase().replace(!1,""):!!r}function a(e){return"string"==typeof e}function i(e){return"function"==typeof e}function u(e,n,t){if(!n||!r.isString(n)||!n.trim().length>0)return void 0;var a=n.split("."),i=e;if(a&&a.length>1)for(var u in a)i=i[a[u]];else i=e[a[0]];return!i&&t?t:i}return{isObject:e,isPlainObject:n,getBool:t,isString:a,isFunction:i,get:u}}(),n=function(){function u(){console.log(":::RULES:::"),console.log(e),console.log(":::FUNCTIONS:::"),console.log(n),console.log(":::VALIDATION PARTS:::"),console.log(t)}function l(r){return r&&!Array.isArray(r)&&r.name&&(e[r.name]=r),i}function s(e){return e&&Array.isArray(e)&&e.forEach(function(e){l(e)}),i}function o(r){return delete e[r],i}function f(e,r){return e&&r&&(n[e]=r),i}function d(e,r){return e&&r&&(t[e]={props:r}),i}function c(e){return t[e]?!0:!1}function v(e,t,i,u){function d(e){var n=typeof e;return"boolean"!==n||null!==e&&void 0!==e?!("number"!==n&&"boolean"!==n&&(!e||r.isString(e)&&""===e.trim())):!1}function c(n){var t=r.get(e,n.prop);if("number"==typeof n.value&&(""===t||void 0===t||null===t))return!1;switch("boolean"==typeof n.value&&(t=r.getBool(t)),n.operand){case a.greaterThan:return t>n.value;case a.greaterThanOrEqual:return t>=n.value;case a.lowerThan:return t<n.value;case a.lowerThanOrEqual:return t<=n.value;case a.equal:return t==n.value;case a.strictlyEqual:return t===n.value;case a.different:return t!=n.value;case a.strictlyDifferent:default:return t!==n.value}}function v(){if(t.global||void 0!==i&&null!==i)for(var e in t.validationRules)if(t.validationRules.hasOwnProperty(e)&&p(u,t.validationRules[e].steps)){var a=n[t.validationRules[e].fn];if(l=r.isFunction(t.validationRules[e].params.value)?a.call(this,i,t.validationRules[e].params.value.call(this)):a.call(this,i,t.validationRules[e].params),r.isObject(l)){if(!l.result)return s=l.error?l.error:e,o=t.validationRules[e].params,void(l=l.result);l=!0}else if(!l)return s=e,void(o=t.validationRules[e].params)}}function p(e,r){if(!e||0===e.length)return!0;if(r&&r.length>0)for(var n in e)if(-1!==r.indexOf(e[n]))return!0;return!1}var l=!0,s=void 0,o=void 0,f=!1;return function(){var n,a,o=d(i);for(a=0;a<t.passiveDepends.length;a++)if(n=r.isFunction(t.passiveDepends[a].value),n&&t.passiveDepends[a].value.call(this,r.get(e,t.passiveDepends[a].prop))||!n&&c(t.passiveDepends[a]))f=!0;else if(t.passiveDepends[a].mustBeValid)return void(l=!0);if(f&&!o)return s="required",void(l=!1);for(a=0;a<t.activeDepends.length;a++)if(n=r.isFunction(t.activeDepends[a].value),n&&!t.activeDepends[a].value.call(this,r.get(e,t.activeDepends[a].prop))||!n&&!c(t.activeDepends[a]))return void(l=!0);t.global?v():t.required?p(u,t.requiredSteps)&&!o?(s="required",l=!1):v():o?v():l=!0}(),{validationResult:l,error:s,params:o}}function p(e,n,t,a){if(t){var i=r.get(e,t.prop),u=v(e,t,i,a);u.validationResult===!1&&n.push({prop:t.prop,value:i,error:u.error,params:u.params&&u.params.value?u.params.value:u.params})}}function g(r,n,t,a,i){if(a)for(var u=0;u<a.length;u++)h(i,e[a[u]].categories)&&p(r,n,e[a[u]],t);else for(var l in e)h(i,e[l].categories)&&p(r,n,e[l],t)}function h(e,r){if(!e||0===e.length)return!0;if(r&&r.length>0)for(var n in e)if(-1!==r.indexOf(e[n]))return!0;return!1}function m(e,r,n,t){var a=[];return r&&g(r,a,n,void 0,t),e?0===a.length:a}function R(e,r,n,t,a){var i=[];return r&&n&&g(r,i,t,n,a),e?0===i.length:i}function b(e,r,n,a,i){var u=[];if(r&&n)for(var l=0;l<n.length;l++)g(r,u,a,t[n[l]].props,i);return e?0===u.length:u}var n,e={},t={},a={greaterThan:1,gt:1,greaterThanOrEqual:2,gte:2,lowerThan:3,lt:3,lowerThanOrEqual:4,lte:4,equal:5,eq:5,strictlyEqual:6,seq:6,different:7,dif:7,strictlyDifferent:8,sdif:8},i={validate:m,validateProps:R,validateParts:b,addRule:l,ar:l,addRules:s,ars:s,deleteRule:o,dr:o,addValidationRule:f,avr:f,addValidationPart:d,avp:d,operand:a,op:a,validationPartExist:c,debug:u};return function(){n={},n.min=function(e,r){return e>=r.value},n.max=function(e,r){return e<=r.value},n.minLength=function(e,r){return e.length>=r.value},n.maxLength=function(e,r){return e.length<=r.value}}(),i},t=function(){function u(e){return e&&(i=e,n=!1),a}function l(r,n){return f(),e.name=r,e.prop=n,t}function s(r){return r?(e=r,t):a}function o(){return(n||!i)&&(n=!1,i=[]),i.push(e),a}function f(){e={required:!1,global:!1,validationRules:{},activeDepends:[],passiveDepends:[],categories:[]}}function d(){return f(),t}function c(){return f(),n=!0,i=void 0,a}function v(n,a,i){return e.validationRules[n]=r.isObject(a)&&r.isPlainObject(a)?{fn:n,params:a,steps:i}:{fn:n,params:{value:a},steps:i},t}function p(r){return delete e.validationRules[r],t}function g(r){return e.global=r,t}function h(r,n){return e.required=r,e.requiredSteps=n,t}function m(r,n,a){return e.activeDepends.push({prop:r,value:n,operand:a}),t}function R(r,n,a,i){return e.passiveDepends.push({prop:r,value:n,mustBeValid:a,operand:i}),t}function b(r){return r&&e.categories.push(r),t}function y(r){if(r)for(var n in r)e.categories.splice($.inArray(r[n],e.categories),1);return t}function D(){return i?(i.push(e),n=!0,i):e}var e,i,n=!0,t={required:h,r:h,next:o,end:D,addValidation:v,av:v,deleteValidation:p,dv:p,addActiveDepends:m,aad:m,addPassiveDepends:R,apd:R,global:g,g:g,reset:d,resetWorld:c,addCategories:b,deleteCategories:y},a={newRule:l,modifyRule:s,resetWorld:c,startFrom:u};return a}();e.sovalid=n,e.ruleMaker=t,e.sovalidCommons=r}(window);